<!-- <app-breadcrumb [title]="'Checkout'" [breadcrumb]="'Checkout'"></app-breadcrumb> -->
<section class="section-b-space" style="padding-top: 20px !important;">
    <div class="container">
        <!--*********************Delivery Address****************-->
        <div class="checkout-page">
            <div class="checkout-form">
                <!-- {{lstBillingAddress|json}} -->
                <form>
                    <div class="checkout-steps" *ngIf="Address1">
                        <h4 *ngIf="lstBillingAddress?.length>0" class="step-heading"><span
                                class="Sequence">1</span>Delivery Address</h4>
                        <div *ngFor="let lstBilling of lstBillingAddress;let idx = index" class="delivery-address">
                            <div class="d-flex justify-content-start">
                                <div class="pr-4">
                                    <input type="radio" [checked]="lstBilling.billingAddressId==AddressId"
                                        name="selectAddress" (change)="onItemChange(lstBilling)"
                                        value="{{lstBilling.billingAddressId}}">
                                </div>
                                <address>
                                    <div>
                                        <b>Full Name : </b>
                                        <p>{{lstBilling.fName}} {{lstBilling.lName}}</p>
                                        <br>
                                        <b>Mobile : </b>
                                        <p>{{lstBilling.phone}}</p>
                                    </div>
                                    <p>
                                        <b>Company Name: </b>
                                        {{lstBilling.companyName}}

                                    </p>
                                    <br>
                                    <p>

                                        <b>Email : </b>
                                        {{lstBilling.emailId}}
                                    </p>
                                    <div>
                                        <b>Address : </b> {{lstBilling.address}}, {{lstBilling.city}}
                                        {{lstBilling.state}}, {{lstBilling.zipCode}}, {{lstBilling.country}}
                                    </div>
                                    <div>
                                        <!-- <a href="javascript:void(0)" (click)="SelectBillingAddress(lstBilling)">Select
                                                Address</a> -->
                                        <button type="submit" class="btn-solid btn mt-3" [id]="idx"
                                            *ngIf="lstBilling.billingAddressId==AddressId"
                                            (click)="SelectdeliverAddress(lstBilling)">
                                            Deliver to this address
                                        </button>
                                    </div>
                                </address>
                            </div>
                        </div>

                    </div>

                    <div class="checkout-steps" *ngIf="Address2">
                        <h4 class="step-heading"><span class="Sequence">1</span>Delivery Address
                            <i class="fa fa-check"></i>
                        </h4>
                        {{SelectedAddress}}<button type="submit" (click)="ChangeAddress()"
                            class="btn-solid btn mt-3">Change</button>

                    </div>

                    <!--*********************Add new address****************-->
                    <div class="checkout-steps" *ngIf="addnewaddress">
                        <div class="step-heading">
                            <button class="btn btn-link" (click)="AddNewAddress()"><i class="fa fa-plus"></i> Add New
                                delivery
                                Address</button>
                        </div>

                    </div>
                    <div class="checkout-steps" *ngIf="addaddress">
                        <div class="step-heading">
                            <span>Add New delivery Address</span>
                        </div>
                        <div class="row check-out">
                            <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                <div class="field-label">Full Name<span style="color: red;">*</span> </div>
                                <input autofocus type="text" name="fName" maxlength="50"
                                    [formControl]="checkoutForm.controls['fName']" value="" placeholder=""
                                    autocomplete="off">
                                <div *ngIf="(checkoutForm.controls.fName.touched || Submitted) && checkoutForm.controls.fName.errors?.required"
                                    class="text text-danger">
                                    Full Name is required.
                                </div>
                                <div *ngIf="(checkoutForm.controls.fName.touched || Submitted) && checkoutForm.controls.fName.errors?.pattern"
                                    class="text text-danger">
                                    Full Name must be an alphabates.
                                </div>
                            </div>


                            <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                <div class="field-label">Company Name </div>
                                <input type="text" name="companyName" maxlength="150"
                                    [formControl]="checkoutForm.controls['companyName']" value="" placeholder=""
                                    autocomplete="off">
                                <div *ngIf="(checkoutForm.controls.companyName.touched || Submitted) && checkoutForm.controls.companyName.errors?.required"
                                    class="text text-danger">
                                    Company Name is required.
                                </div>
                                <div *ngIf="(checkoutForm.controls.companyName.touched || Submitted) && checkoutForm.controls.companyName.errors?.pattern"
                                    class="text text-danger">
                                    Company Name must be an alphabates
                                </div>
                            </div>

                            <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                <div class="field-label">Phone <span style="color: red;">*</span></div>
                                <input type="text" name="phone" maxlength="10"
                                    [formControl]="checkoutForm.controls['phone']" value="" placeholder=""
                                    autocomplete="off">
                                <div *ngIf="(checkoutForm.controls.phone.touched || Submitted) && checkoutForm.controls.phone.errors?.required"
                                    class="text text-danger">
                                    Phone No is required.
                                </div>
                                <div *ngIf="(checkoutForm.controls.phone.touched || Submitted) && checkoutForm.controls.phone.errors?.pattern"
                                    class="text text-danger">
                                    Phone No must be number
                                </div>
                            </div>
                            <!-- <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                    <div class="field-label">Email Address <span style="color: red;">*</span></div>
                                    <input type="text" name="emailId" [formControl]="checkoutForm.controls['emailId']"
                                        value="" placeholder="" autocomplete="off">
                                    <div *ngIf="(checkoutForm.controls.emailId.touched || Submitted) && checkoutForm.controls.emailId.errors?.required"
                                        class="text text-danger">
                                        Email address is required
                                    </div>
                                    <div *ngIf="(checkoutForm.controls.emailId.touched || Submitted) && checkoutForm.controls.emailId.errors?.emailId"
                                        class="text text-danger">
                                        Invalid email address
                                    </div>
                                </div> -->
                            <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                <div class="field-label">Address <span style="color: red;">*</span></div>
                                <textarea maxlength="200" name="address"
                                    [formControl]="checkoutForm.controls['address']" style="height: 65px;" value=""
                                    placeholder="" autocomplete="off"></textarea>
                                <div *ngIf="(checkoutForm.controls.address.touched || Submitted) && checkoutForm.controls.address.errors?.required"
                                    class="text text-danger">
                                    Address is required
                                </div>
                                <div *ngIf="(checkoutForm.controls.address.touched || Submitted) && checkoutForm.controls.address.errors?.maxlength"
                                    class="text text-danger">
                                    Maximum 50 character
                                </div>
                            </div>
                            <div class="form-group col-md-6 col-sm-6 col-xs-6">
                                <div class="field-label">Country <span style="color: red;">*</span></div>
                                <select name="country" [formControl]="checkoutForm.controls['country']">
                                    <option value="" selected>Select Country</option>
                                    <option value="India">India</option>
                                    <!-- <option value="USA">USA</option>
                                        <option value="Australia">Australia</option> -->
                                </select>
                                <div *ngIf="(checkoutForm.controls.country.touched || Submitted) && checkoutForm.controls.country.errors?.required"
                                    class="text text-danger">
                                    Country is required
                                </div>
                            </div>
                            <div class="form-group col-md-6 col-sm-6 col-xs-6">
                                <div class="field-label">State <span style="color: red;">*</span></div>
                                <!-- <input type="text" name="state" [formControl]="checkoutForm.controls['state']" value="" placeholder="" autocomplete="off"> -->
                                <select name="country" [formControl]="checkoutForm.controls['state']">
                                    <option value="">Select State</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands
                                    </option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                                    <option value="Daman and Diu">Daman and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>

                                </select>
                                <div *ngIf="(checkoutForm.controls.state.touched || Submitted) && checkoutForm.controls.state.errors?.required"
                                    class="text text-danger">
                                    State is required
                                </div>
                            </div>


                            <div class="form-group col-md-6 col-sm-6 col-xs-6">
                                <div class="field-label">City <span style="color: red;">*</span></div>
                                <input maxlength="100" type="text" name="city"
                                    [formControl]="checkoutForm.controls['city']" value="" placeholder=""
                                    autocomplete="off">
                                <div *ngIf="(checkoutForm.controls.city.touched || Submitted) && checkoutForm.controls.city.errors?.required"
                                    class="text text-danger">
                                    City is required
                                </div>
                            </div>
                            <div class="form-group col-md-6 col-sm-6 col-xs-6">
                                <div class="field-label">Pin Code <span style="color: red;">*</span></div>
                                <input maxlength="6" type="text" name="zipCode"
                                    [formControl]="checkoutForm.controls['zipCode']" value="" placeholder=""
                                    autocomplete="off">
                                <div *ngIf="(checkoutForm.controls.zipCode.touched || Submitted) && checkoutForm.controls.zipCode.errors?.required"
                                    class="text text-danger">
                                    Pin Code is required
                                </div>

                                <div *ngIf="(checkoutForm.controls.zipCode.touched || Submitted) && checkoutForm.controls.zipCode.errors?.pattern"
                                    class="text text-danger">
                                    Pin Code must be number
                                </div>
                            </div>
                            <br>
                            <div class="p-3">
                                <button class="btn btn-solid" (click)=SaveAddress()>Save and Deliver Here</button>
                                <button class="btn btn-solid" (click)=cancel()>Cancel</button>
                            </div>
                        </div>
                    </div>
                    <!--*********************Order Summary****************-->

                    <div class="checkout-steps" *ngIf="OrderSummary1">
                        <div class="step-heading">
                            <span class="Sequence">2</span><span>Order Summary</span>
                            <i class="fa fa-check" *ngIf="fafaCheck"></i>
                        </div>

                    </div>



                    <div class="checkout-steps" *ngIf="OrderSummary2">
                        <h4 class="step-heading">
                            <span class="Sequence">2</span>Order Summary
                        </h4>
                        <div class="checkout-details">
                            <div class="order-box table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th class="thead-dark">
                                                Product
                                            </th>
                                            <th class="thead-dark">
                                                Price
                                            </th>
                                            <th class="thead-dark">
                                                Qty
                                            </th>
                                            <th class="thead-dark">
                                                Add. Discount (%)
                                            </th>
                                            <th class="thead-dark">
                                                Add. Discount Amount
                                            </th>
                                            <th class="thead-dark">
                                                Total Amount
                                            </th>
                                            <th class="thead-dark">
                                                GST Rate(%)
                                            </th>
                                            <th class="thead-dark">
                                                GST Amount
                                            </th>
                                            <th class="thead-dark">
                                                Total
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let product of productSizeColor">
                                            <td>
                                                {{ product?.productName }}
                                            </td>
                                            <td>
                                                {{ product?.salePrice | currency:productService?.Currency.currency:'symbol'}}
                                            </td>
                                            <td>
                                                {{ product?.quantity }}
                                            </td>
                                            <td>
                                                {{ product?.additionalDiscount }}%
                                            </td>
                                            <td>
                                                {{ product?.additionalDiscountAmount | currency:productService?.Currency.currency:'symbol'}}
                                            </td>
                                            <td>
                                                {{ (product?.salePrice*product?.quantity-product?.additionalDiscountAmount) | currency:productService?.Currency.currency:'symbol' }}
                                            </td>
                                            <td>
                                                {{ product?.gstRate }}%
                                            </td>
                                            <td>
                                                {{ product?.gstAmount | currency:productService?.Currency.currency:'symbol'}}
                                            </td>
                                            <td>
                                                <span style="float: right; font-size: 16px; line-height: 20px;  font-weight: 400;">
                                                    {{ (product?.salePrice*product?.quantity-product?.additionalDiscountAmount+product?.gstAmount) | currency:productService?.Currency.currency:'symbol' }}</span>
                                            </td>
                                        </tr>
                                        <tr *ngIf='!productSizeColor.length'>
                                            <td colspan="9">
                                                There are no products in cart
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <b>Subtotal</b>
                                            </td>
                                            <td>
                                                <b>{{ getTotalAdditionalDiscountAmount() | currency:productService?.Currency.currency:'symbol'}}</b>
                                            </td>
                                            <td>
                                                {{ getTotalAmountWithDis() | currency:productService?.Currency.currency:'symbol'}}
                                            </td>
                                            <td></td>
                                            <td>
                                                <b>{{ getTotalGSTAmount() | currency:productService?.Currency.currency:'symbol'}}</b>
                                            </td>
                                            <td>
                                                <span style="float: right; font-size: 16px; line-height: 20px; color: var(--theme-deafult); font-weight: 400;">
                                                    {{ getTotal() | currency:productService?.Currency.currency:'symbol'}}</span>
                                            </td>
                                        </tr>
                                        <!-- <tr>
                                            <td colspan="5">
                                                <b>GST ({{GST}}%)</b>
                                            </td>
                                            <td>
                                                <span style="float: right; font-size: 16px; line-height: 20px; color: var(--theme-deafult); font-weight: 400;">
                                                    {{ getTotal()*(GST)/100 | currency:productService?.Currency.currency:'symbol'}}</span>
                                            </td>
                                        </tr> -->
                                        <tr>
                                            <td colspan="7">
                                                <b> Packing</b>
                                            </td>
                                            <td colspan="2">
                                                <span style="float: right; font-size: 16px; line-height: 20px; color: var(--theme-deafult); font-weight: 400;">
                                                    <b>Free Packing</b></span>
                                            </td>
                                        </tr>
                                        <tr class="total">
                                            <td colspan="7">
                                                <b>Total</b>
                                            </td>
                                            <td colspan="2">
                                                <span style="float: right; font-size: 16px; line-height: 20px; color: var(--theme-deafult); font-weight: 400;">
                                                    {{ getTotal() | currency:productService?.Currency.currency:'symbol'}}</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <!-- <div class="title-box">
                                    <div>Product <span> Total</span></div>
                                </div>
                                <ul class="qty" *ngIf='productSizeColor?.length'>
                                    <li *ngFor="let product of productSizeColor">
                                        {{ product?.productName }} × {{ product?.quantity }}
                                        <span>
                                            {{ product.salePrice  | currency:productService?.Currency.currency:'symbol' }}
                                        </span>
                                    </li>
                                </ul>
                                <ul class="qty" *ngIf='!productSizeColor.length'>
                                    <li class="empty-checkout"> There are no products in cart </li>
                                </ul> -->
                                <!-- <ul class="sub-total">
                                    <li>
                                        Subtotal <span class="count">{{ getTotal() | currency:productService?.Currency.currency:'symbol'}}</span>
                                    </li>
                                    <li>
                                        GST ({{GST}}%) <span class="count">{{ getTotal()*(GST)/100 | currency:productService?.Currency.currency:'symbol'}}</span>
                                    </li>
                                    <li *ngIf='productSizeColor.length'>
                                        Shipping
                                        <div class="shipping">
                                            Free Shipping
                                            
                                        </div>
                                    </li>
                                </ul>
                                <ul class="total">
                                    <li>Total <span class="count">{{ getTotal()+(getTotal()*(GST)/100) | currency:productService?.Currency.currency:'symbol'}}</span>
                                    </li>
                                </ul> -->
                            </div>

                        </div>
                    </div>

                    <div class="checkout-steps" *ngIf="Continuebtn">
                        <div class="step-heading">
                            <div>
                                <span>Order confirmation email will be sent to
                                    deepakrahejain@gmail.com</span> <button class="btn btn-solid"
                                    (click)="Continue()">Continue</button>
                            </div>
                        </div>
                    </div>




                    <!--*********************Payment Options****************-->
                    <div class="checkout-steps" *ngIf="PaymentOption1">
                        <div class="step-heading">
                            <span class="Sequence">3</span><span> Payment Options</span>
                        </div>

                    </div>
                    <div class="checkout-steps" *ngIf="PaymentOption2">
                        <h4 class="step-heading">
                            <span class="Sequence">3</span> <span>Payment Options</span>
                        </h4>
                        <div class="payment-box" *ngIf='productSizeColor?.length'>
                            <div class="upper-box">
                                <div class="payment-options">
                                    <ul>
                                        <li>
                                            <div class="radio-option">
                                                <input type="radio"
                                                    [formControl]="checkoutForm.controls['paymentTypeId']" [value]="1"
                                                    name="payment-group" id="payment-1">
                                                <label for="payment-1">Online Payment
                                                </label>
                                            </div>
                                        </li>
                                        <li *ngIf="user[0].isAgentCustomer">
                                            <div class="radio-option">
                                                <input type="radio"
                                                    [formControl]="checkoutForm.controls['paymentTypeId']" [value]="2"
                                                    name="payment-group" id="payment-2">
                                                <label for="payment-2">Credit to Agent
                                                </label>
                                            </div>
                                        </li>
                                        <li *ngIf="user[0].isVIPMember">
                                            <div class="radio-option">
                                                <input type="radio"
                                                    [formControl]="checkoutForm.controls['paymentTypeId']" [value]="3"
                                                    name="payment-group" id="payment-3">
                                                <label for="payment-3">Direct Credit
                                                </label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="text-right">
                                <button type="submit" class="btn-solid btn" (click)="ProcessCheckOut()">
                                    Place Order
                                </button>
                                <!-- <ngx-paypal [config]="payPalConfig" *ngIf="payment == 'Paypal'"></ngx-paypal> -->
                            </div>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</section>